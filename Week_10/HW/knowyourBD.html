<html>

<head>
    <title>Know Your Nepali Birthday Day</title>
    <!--Bootstrap links-->
    <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
    <link rel="stylesheet" href="https://formden.com/static/cdn/bootstrap-iso.css" />
    <!-- Bootstrap Date-Picker Plugin -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/js/bootstrap-datepicker.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/css/bootstrap-datepicker3.css" />
    <script type="text/javascript">
    // fucntion to change the English date to Nepali date
    function ADtoBS() {
        // NepalidataArray is an array that contains the number of days in a month of a specific year. The days in a month vary from year to year in Nepali calendar
        var NepalidataArray = [
            [2005, 17, 30, 29, 30, 30, 31, 31, 32, 32, 31, 30, 30, 29, 30],
            [2006, 18, 30, 29, 30, 30, 31, 32, 31, 32, 31, 30, 30, 30, 29],
            [2007, 17, 29, 29, 30, 31, 31, 31, 31, 32, 31, 31, 29, 30, 30],
            [2008, 17, 30, 29, 29, 31, 31, 31, 32, 31, 31, 31, 30, 29, 30],
            [2009, 18, 30, 29, 30, 30, 31, 31, 32, 32, 31, 30, 30, 29, 30],
            [2010, 18, 30, 29, 30, 30, 31, 32, 31, 32, 31, 30, 30, 30, 29],
            [2011, 17, 29, 29, 30, 31, 31, 31, 31, 32, 31, 31, 29, 30, 30],
            [2012, 17, 30, 29, 30, 30, 31, 31, 32, 31, 31, 31, 30, 29, 30],
            [2013, 18, 30, 29, 30, 30, 31, 31, 32, 32, 31, 30, 30, 29, 30],
            [2014, 18, 30, 29, 30, 30, 31, 32, 31, 32, 31, 30, 30, 30, 29],
            [2015, 17, 29, 29, 30, 31, 31, 31, 31, 32, 31, 31, 29, 30, 30],
            [2016, 17, 30, 29, 30, 30, 31, 31, 32, 31, 31, 31, 30, 29, 30],
            [2017, 18, 30, 29, 30, 30, 31, 32, 31, 32, 31, 30, 30, 29, 30],
            [2018, 18, 30, 29, 30, 30, 31, 32, 31, 32, 31, 30, 30, 30, 29],
            [2019, 17, 29, 30, 29, 31, 31, 31, 31, 32, 31, 31, 30, 29, 30],
            [2020, 17, 30, 29, 30, 30, 31, 31, 32, 31, 31, 31, 30, 29, 30],
            [2021, 18, 30, 29, 30, 30, 31, 32, 31, 32, 31, 30, 30, 30, 29],
            [2022, 17, 29, 29, 30, 30, 31, 32, 31, 32, 31, 30, 30, 30, 29],
            [2023, 17, 29, 30, 29, 31, 31, 31, 31, 32, 31, 31, 30, 29, 30],
            [2024, 17, 30, 29, 30, 30, 31, 31, 32, 31, 31, 31, 30, 29, 30],
            [2025, 18, 30, 29, 30, 30, 31, 32, 31, 32, 31, 30, 30, 30, 29],
            [2026, 17, 29, 29, 30, 31, 30, 32, 31, 32, 31, 30, 30, 30, 29],
            [2027, 17, 29, 30, 29, 31, 31, 31, 32, 31, 31, 31, 30, 29, 30],
            [2028, 17, 30, 29, 30, 30, 31, 31, 32, 31, 32, 30, 30, 29, 30],
            [2029, 18, 30, 29, 30, 30, 31, 32, 31, 32, 31, 30, 30, 30, 29],
            [2030, 17, 29, 29, 30, 31, 30, 32, 31, 32, 31, 30, 30, 30, 29],
            [2031, 17, 29, 30, 29, 31, 31, 31, 32, 31, 31, 31, 30, 29, 30],
            [2032, 17, 30, 29, 30, 30, 31, 31, 32, 32, 31, 30, 30, 29, 30],
            [2033, 18, 30, 29, 30, 30, 31, 32, 31, 32, 31, 30, 30, 30, 29],
            [2034, 17, 29, 29, 30, 31, 30, 32, 31, 32, 31, 31, 29, 30, 30],
            [2035, 17, 30, 29, 29, 31, 31, 31, 32, 31, 31, 31, 30, 29, 30],
            [2036, 17, 30, 29, 30, 30, 31, 31, 32, 32, 31, 30, 30, 29, 30],
            [2037, 18, 30, 29, 30, 30, 31, 32, 31, 32, 31, 30, 30, 30, 29],
            [2038, 17, 29, 29, 30, 31, 31, 31, 31, 32, 31, 31, 29, 30, 30],
            [2039, 17, 30, 29, 30, 30, 31, 31, 32, 31, 31, 31, 30, 29, 30],
            [2040, 17, 30, 29, 30, 30, 31, 31, 32, 32, 31, 30, 30, 29, 30],
            [2041, 18, 30, 29, 30, 30, 31, 32, 31, 32, 31, 30, 30, 30, 29],
            [2042, 17, 29, 29, 30, 31, 31, 31, 31, 32, 31, 31, 29, 30, 30],
            [2043, 17, 30, 29, 30, 30, 31, 31, 32, 31, 31, 31, 30, 29, 30],
            [2044, 17, 30, 29, 30, 30, 31, 32, 31, 32, 31, 30, 30, 29, 30],
            [2045, 18, 30, 29, 30, 30, 31, 32, 31, 32, 31, 30, 30, 30, 29],
            [2046, 17, 29, 29, 30, 31, 31, 31, 31, 32, 31, 31, 30, 29, 30],
            [2047, 17, 30, 29, 30, 30, 31, 31, 32, 31, 31, 31, 30, 29, 30],
            [2048, 17, 30, 29, 30, 30, 31, 32, 31, 32, 31, 30, 30, 30, 29],
            [2049, 17, 29, 29, 30, 30, 31, 32, 31, 32, 31, 30, 30, 30, 29],
            [2050, 17, 29, 30, 29, 31, 31, 31, 31, 32, 31, 31, 30, 29, 30],
            [2051, 18, 30, 29, 30, 30, 31, 31, 32, 31, 31, 31, 30, 29, 30],
            [2052, 17, 30, 29, 30, 30, 31, 32, 31, 32, 31, 30, 30, 30, 29],
            [2053, 17, 29, 29, 30, 30, 31, 32, 31, 32, 31, 30, 30, 30, 29],
            [2054, 17, 29, 30, 29, 31, 31, 31, 32, 31, 31, 31, 30, 29, 30],
            [2055, 17, 30, 29, 30, 30, 31, 31, 32, 31, 32, 30, 30, 29, 30],
            [2056, 17, 30, 29, 30, 30, 31, 32, 31, 32, 31, 30, 30, 30, 29],
            [2057, 17, 29, 29, 30, 31, 30, 32, 31, 32, 31, 30, 30, 30, 29],
            [2058, 17, 29, 30, 29, 31, 31, 31, 32, 31, 31, 31, 30, 29, 30],
            [2059, 17, 30, 29, 30, 30, 31, 31, 32, 32, 31, 30, 30, 29, 30],
            [2060, 17, 30, 29, 30, 30, 31, 32, 31, 32, 31, 30, 30, 30, 29],
            [2061, 17, 29, 29, 30, 31, 30, 32, 31, 32, 31, 31, 29, 30, 29],
            [2062, 17, 29, 30, 29, 31, 31, 31, 32, 31, 31, 31, 30, 29, 30],
            [2063, 17, 30, 29, 30, 30, 31, 31, 32, 32, 31, 30, 30, 29, 30],
            [2064, 17, 30, 29, 30, 30, 31, 32, 31, 32, 31, 30, 30, 30, 29],
            [2065, 17, 29, 29, 30, 31, 31, 31, 31, 32, 31, 31, 29, 30, 30],
            [2066, 17, 30, 29, 29, 31, 31, 31, 32, 31, 31, 31, 30, 29, 30],
            [2067, 17, 30, 29, 30, 30, 31, 31, 32, 32, 31, 30, 30, 29, 30],
            [2068, 17, 30, 29, 30, 30, 31, 32, 31, 32, 31, 30, 30, 30, 29],
            [2069, 17, 29, 29, 30, 31, 31, 31, 31, 32, 31, 31, 29, 30, 30],
            [2070, 17, 30, 29, 30, 30, 31, 31, 32, 31, 31, 31, 30, 29, 30],
            [2071, 17, 30, 29, 30, 30, 31, 32, 31, 32, 31, 30, 30, 29, 30],
            [2072, 17, 30, 29, 30, 30, 31, 32, 31, 32, 31, 30, 30, 30, 29],
            [2073, 17, 29, 29, 30, 31, 31, 31, 31, 32, 31, 31, 30, 29, 30],
            [2074, 17, 30, 29, 30, 30, 31, 31, 32, 31, 31, 31, 30, 29, 30]
        ]

        // Getting English date from the user and splitting them into three parts 
        var date_input = (document.getElementById("date").value).split("/", 3);
        // changing each component to intergers so that arithmetic operations can be operated on them
        // enyear stands for English Year, enmonth for English Month and so on 
        var enyear = parseInt(date_input[2]);
        var enmonth = parseInt(date_input[0]);
        var enday = parseInt(date_input[1]);

        // this program can perform conversion from year 1949 to 2016
        if (enyear < 1949 || enyear > 2017) {
            alert('Please enter a date between 1949 and 2016')
        }

        // finding Day of the year for the chosen date 
        daysinMonths = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
        var endays = 0;
        for (i = 1; i < enmonth; i++) {
            endays = endays + daysinMonths[i];
            if (i == 2 && enyear % 4 == 0) {
                endays = endays + 1;
            }
        }
        endays = endays + enday;

        // intializing npyear(Nepali year). NepalidataArray corresponds to date from 1949 forward
        var npyear = NepalidataArray[enyear - 1949][0];
        // intializing npmonth to 9 as the January falls on the 9th month of Nepali calendar
        var npmonth = 9;
        // initailizng the days in month to the number of days of 9th month of Nepali Calendar
        var npdaysInmonth = NepalidataArray[enyear - 1949][2];
        // intializing temporary days to the number of days that falls both in January and the 9th month of the Nepali calendar
        var npTempdays = (NepalidataArray[enyear - 1949][2]) - (NepalidataArray[enyear - 1949][1]) + 1;
        // looping through the array until endays is greater than the temporory days
        for (i = 3; endays > npTempdays; i++) {
            npTempdays += NepalidataArray[enyear - 1949][i];
            npdaysInmonth = NepalidataArray[enyear - 1949][i];
            npmonth++;
            if (npmonth > 12) {
                npmonth -= 12;
                npyear++;
            }
        }
        npday = npdaysInmonth - (npTempdays - endays);

        // Nepali months 
        var NepaliMonths = ["Baisakh", "Jestha", "Asar", "Shrawan", "Bhadra", "Aswin", "Karthik", "Mangshir", "Poush", "Magh", "Fagun", "Chaitra"];
        var monthsCharacters = ["kind-hearted", "extroverts", "introverts", "outgoing and love to live life dangerously", "far-sighted and trustworthy", "clever and witty", "the best in their work", "pious and have a good family life", "beautiful/handsome both inside and out", "highly respected by his peers", "leaders", "just and kind"];
        var monthsprefix = ["First", "Second", "Third", "Fourth", "Fifth", "Sixth", "Seventh", "Eighth", "Ninth", "Tenth", "Eleventh", "Twelveth"]
            // innerHTML text 
        document.getElementById('display').innerHTML = "<h3>You were born on <font color='green'><em>" + NepaliMonths[npmonth] + " " + npday + " " + npyear + ". " + NepaliMonths[npmonth] + "</em></font> is the <font color='green'><em>" + monthsprefix[npmonth] + "</em></font> month in the Nepali Calendar. <br>People born in this month will be <font color='green'><em>" + monthsCharacters[npmonth] + ".</h3> "
    }

    // function to load the display of the calendar. Copied from https://formden.com/blog/date-picker
    var date;
    $(document).ready(function() {
        var date_input = $('input[name="date"]'); //our date input has the name "date"
        date = date_input.value;
        var container = $('.bootstrap-iso form').length > 0 ? $('.bootstrap-iso form').parent() : "body";
        var options = {
            format: 'mm/dd/yyyy',
            container: container,
            todayHighlight: true,
            autoclose: true,
            onSelect: function() {
                $('#myFormID').submit();
            }
        };
        date_input.datepicker(options);
        $('#date-form').submit(function() {
            return false;
        });
    })
    </script>

    <body>
        <div class="bootstrap-iso">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-md-6 col-sm-6 col-xs-12 col-md-offset-3" style="padding:10px;">
                        <label class="control-label" for="date">
                            <h1>Know Your Nepali Birthday</h1></label>
                        <div>
                            <p>
                                <h4>Nepali calendar, also known as Bikram Samvat(BS), is a Hindu calendar used in Nepal and a handful of Indian States. In Nepal, it has been adopted as the official calendar. It is a lunisideral and uses lunar months and sidereal years for timekeeping. Like Gregorian calendar, it has 12 months but the number of days in a month vary from year to year.<br>Choose your birthdate below and click submit to find out your Nepali birthdate.<br><br></h4>
                                <p>
                        </div>
                        <!-- Form code begins -->
                        <form method="post" id="date-form">
                            <div class="form-group">
                                <!-- Date input -->
                                <input class="form-control" id="date" name="date" placeholder="MM/DD/YYY" type="text" />
                            </div>
                            <div class="form-group">
                                <!-- Submit button -->
                                <button class="btn btn-primary " name="submit" type="submit" onClick="ADtoBS()">Submit</button>
                            </div>
                        </form>
                        <p id="display"></p>
                        <!-- Form code ends -->
                    </div>
                </div>
            </div>
        </div>
        <!-- Display after the submit button is clicked -->
        <p id="display"></p>
    </body>

</html>
